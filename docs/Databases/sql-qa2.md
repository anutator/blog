---
title: Вопросы по SQL на собеседованиях 2
share: "true"
tags:
  - sql
---
#### Как найти дубликат записи? Опишите процесс для дублирования записей с одним и несколькими полями.
Дублирование записей с одним полем:

```sql
SELECT name, COUNT(email)
 FROM users
 GROUP BY email
 HAVING COUNT(email) > 1
```

Дублирование записей с несколькими полями:

```sql
SELECT name, email, COUNT(*)
 FROM users
 GROUP BY name, email
 HAVING COUNT(*) > 1
```


#### Результат объединения запросов выведет все значения из таблицы tab?

```sql
SELECT * FROM tab WHERE b = 'a'
UNION
SELECT * FROM tab WHERE b <> 'a'
```

Все или не все выведет запрос зависит от того, может ли b принимать нуловые значения. Хотя то, что на картинке выдаст ошибку. Из-за синтаксиса

#### С помощью какого update-запроса можно обновить значения более чем одной колонки?
Вроде этот
```sql
UPDATE table_name SET col1_name='col1 val', col2_name = 'col2val';
```

```sql
UPDATE table_name SET col1_name='col1val' AND SET col2_name = 'col2val';
```
```sql
UPDATE table_name SET col1_name ='col1val' SET col2_name= 'col2val';
```

13% Одним запросом можно обновить не более одной колонки

#### Какой оператор используется для изменения объектов базы данных?
ALTER

#### Что такое оконная функция? И в чем отличие от функции агрегации с группировкой?
Оконная функция в SQL — функция, которая работает с выделенным набором строк (окном, партицией) и выполняет вычисление для этого набора строк в отдельном столбце.

#### В таблице «Animals» базы данных зоопарка содержится информация обо всех обитающих там животных, в том числе о лисах: red fox, grey fox, little fox. Напишите запрос, возвращающий информацию о возрасте лис.

```sql
SELECT age FROM Animals WHERE Animal LIKE "%fox"
```

#### Для чего нужен оператор UNION?
Для объединения двух таблиц, при условии что каждая имеет одинаковое количество столбцов, столбцы имеют схожие типы данных, столбцы располагаются в том же порядке.

#### С помощью какого запроса можно удалить все записи из таблицы?
DELETE FROM

#### К какому результату приведет выполнение запроса DROP DATABASE Users?
Полное удаление базы данных Users

#### В таблице «Emlpoyees» содержатся данные об именах, фамилиях и зарплате сотрудников. Напишите запрос, который изменит значение зарплаты с 2000 на 2500 для сотрудника с ID=7.

SET Salary-2500 FROM Salary-2000 FOR ID=7 FROM Employees
ALTER TABLE Employees Salary-2500 FOR ID=7

```sql
UPDATE Employees SET Salary-2500 WHERE ID=7
```

#### Какие из операторов SQL могут быть использованы для выполнения CRUD (Create, Read, Update, Delete) операций над данными?

```sql
INSERT, DELETE, SELECT, UPDATE
```

#### Напишите запрос, возвращающий имена, фамилии и даты рождения сотрудников из таблицы «Employees». Условие – в фамилии содержится сочетание «se».

```sql
SELECT FirstName, LastName, BirthDate from Employees WHERE LastName like "%se%"
```

####  Какие операторы обязательны при выборке данных с соединением таблиц (не учитывая cartesian product)?

```sql
SELECT, JOIN, FROM
```

#### Как выглядит запрос, возвращающий все значения из таблицы «Countries» за исключением страны с ID=8?

```sql
SELECT * FROM Countries WHERE ID !=8
SELECT * FROM Countries WHERE ID <>8
```

#### Какой оператор имеет больший приоритет AND или OR (если они используются совместно)?
AND – это логическое умножение, имеет больший приоритет, а OR – сложение.

#### Заполните пробелы в запросе «`SELECT ___, Сountry FROM ___` », который возвращает имена заказчиков и страны, где они находятся, из таблицы «Customers».
Name, Customers

#### Чем NULL отличается от 0?
0 — это число.
NULL — это не число, а также NULL не является значением пустой строки. NULL используется для указания того, что данные отсутствуют, неизвестны, неприменимы. NULL не равен ничему, даже другому NULL.

#### Какой тип объединения является наиболее распространенным?
INNER JOIN — этот
FULL JOIN
LEFT JOIN

#### Как можно заранее узнать, какие записи будут удалены при выполнении DELETE?
заменить DELETE на SELECT*, ведь в остальном синтаксис DELETE похож на синтаксис простого SELECT

#### Назовите типи джойнов в SQL

```sql
INNER
JOIN LEFT
JOIN RIGHT
JOIN FULL
JOIN CROSS
```

#### В каких командах можно использовать LIMIT?
Только SELECT ???

#### Зачем существует команда UPDATE, если можно сначала удалить запись, а потом добавить новую, исправленную?
в записи могут быть автоматически проставляемые поля, которые собьются при внесении записи заново

#### Как сделать несколько записей в таблицу за один запрос?
перечислить через запятую все наборы значений после VALUES

#### Какие поля из таблицы обязательно перечислять в INSERT для вставки данных?
Те, у которых нет DEFAULT-значения и которые не имеют атрибута auto_increment

#### Как правильно добавить строку в таблицу? Какой запрос верный?
```sql
INSERT INTO 'SimpleTable' ('some_text') VALUES ("my text");
```


```sql
INSERT INTO 'Simple Table' SET 'some_text'="my text";
SET INTO 'Simple Table' VALUE 'some_text'="my text";
UPDATE INTO 'Simple Table' SET 'some_text'="my text";
```

#### Как получить значение текущего года в SQL?

```sql
select year(now());
```

#### Какого из перечисленных ниже видов JOIN на самом деле не существует?
`LEFT JOIN` Выводит записи первой таблицы, для ненайденных пар из правой таблицы ставит значение NULL
`RIGHT JOIN` Выводит записи второй таблицы, а на место недостающей информации из первой ставит NULL
`INNER JOIN` показывает только те записи, для которых нашлись пары
`TRUE JOIN` Выводит все истинные значения — этого нет!

#### Выберите пример корректно написанного запроса с использованием подзапроса. Этот запрос выводит информацию о заказе с самой дорогой стоимостью.

```sql
# неправильные
select * from Orders where price = (select big(price) from Orders)
select * from Orders where price = max
select count(*) from Orders
```

```sql
select * from Orders where price = (select max(price) from Orders)
```

#### Что покажет следующий запрос?
```sql
select seller_id, count(*) from Orders GROUP BY seller_id HAVING seller_id IN (2,4,6);
```

Ответ
63% Количество заказов, сгруппированное по продавцам 2, 4 и 6

#### Дана таблица tbl и поля nmbr со следующими значениями:
```
1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1
```

Написать запрос, чтобы установить 2 вместо 0 и установить 3 вместо 1.

```sql
update TBL set Nmbr = case when Nmbr = 0 then 2 else 3 end;
```